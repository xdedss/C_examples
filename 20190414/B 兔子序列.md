# B 兔子序列

## 分析

这个题和斐波那契数列很像，只是条件有一些变化，可以类比斐波那契数列来思考。  
对于斐波那契数列，有a\[n\]=a\[n-1\]+a\[n-2\]，因为斐波那契数列的条件是兔子出生后第三年开始才会每年繁殖，并且一直繁殖，因此每年的增量等于两年前的数量。  
而这题的情况则是出生后第四年才会繁殖，并且八年就停止繁殖，因此增量就是三年前的数量（即满四年的兔子数量）减去七年前的数量（即满八年的兔子数量），有a\[n\]=a\[n-1\]+a\[n-3\]-a\[n-7\]  

## 注意事项

- 每次运算完取余，避免溢出  
- 然而因为递推算式里面有减法，取余完了再减会出现负数，因此判断一下，遇到负数再加一个1000000007  

## 实现

### 循环实现

用一个长度为7的数组存起来之前7年的数量，算出新的一年之后把数组每个数往前挪一格，把新的数放进去。  

```c
#include <stdio.h>
int main(){
    int stored[7] = {0, 0, 0, 0, 0, 0, 1};
    int i, j, n;
    scanf("%d", &n);
    for(i = 1; i < n; i++){
        int current = stored[6] + stored[4] - stored[0];
        while(current < 0){//避免负数
            current += 1000000007;
        }
        current %= 1000000007;
        for(j = 0; j < 6; j++){
            stored[j] = stored[j + 1];
        }
        stored[6] = current;
    }
    printf("%d", stored[6]);
}
```

### 递归实现

仿照斐波那契数列递归实现即可，但是效率低。

### 有趣的实现

既然n<=100，并且每一个n对应一个确定的答案，我们可以写个程序先算出来每一项的答案，然后把答案写到一个数组，输出即可。

```c
int main(){
    int stored[] = {0, 1, 1, 1, 2, 3, 4, 6, 8, 11, 16, 22, 30, 42, 58, 80,
                    111, 153, 211, 292, 403, 556, 768, 1060, 1463, 2020,
                    2788, 3848, 5312, 7332, 10120, 13969, 19281, 26613,
                    36734, 50703, 69984, 96598, 133332, 184035, 254020,
                    350618, 483950, 667986, 922006, 1272624, 1756575,
                    2424561, 3346567, 4619192, 6375767, 8800328, 12146896,
                    16766088, 23141855, 31942184, 44089080, 60855168, 83997024,
                    115939208, 160028288, 220883457, 304880481, 420819689,
                    580847978, 801731435, 106611909, 527431599, 108279570,
                    910011005, 16622908, 544054507, 652334077, 562345076,
                    578967984, 123022484, 775356562, 337701631, 916669615,
                    39692093, 815048655, 152750279, 69419888, 109111981,
                    924160636, 76910909, 146330797, 255442778, 179603408,
                    256514317, 402845114, 658287893, 837891301, 94405611,
                    497250726, 155538612, 993429913, 87835518, 585086244,
                    740624856, 734054763
                   };
    int n;
    scanf("%d", &n);
    printf("%d", stored[n]);
}
```
